package generateotp;


import java.util.LinkedList;
import java.util.function.Supplier;

public class Entry {

	public static void main(String[] args) {
		
		LinkedList<Object> linkedList = new LinkedList<>();
		
		
		Runnable GeneratorThread = () ->
		{
			String sum = "";
			int idx = 3;
			while(idx > 0) {
				sum += (int)(Math.random() * 9);
				idx--;
			}
			
			linkedList.add(sum);
		};
		
		
		for(int i = 0; i < 500; i++) {
			try {
				synchronized(GeneratorThread) {
					Thread obj = new Thread(GeneratorThread);
					obj.start();
					Thread.sleep(1);
				}
				
			} catch (InterruptedException e) {
				
				e.printStackTrace();
			}
			System.out.println("OTP added is : " + linkedList.getLast());
		}
		
		
		
		Runnable ConsumerThread  = () -> linkedList.removeLast();
		
		try {
			for(int i = 0; i < 40; i++) {
				synchronized(ConsumerThread) {
					Thread obj1 = new Thread(ConsumerThread);
					obj1.start();
					Thread.sleep(1000);
					System.out.println("OTP removed is : " + linkedList.getLast());
				}
			}
		} catch (InterruptedException e) {
			
			e.printStackTrace();
		}
		
	
		
		
		
		
		
//		for(int i = 0; i < 5; i++) {
//			linkedList.add(GeneratorThread.get());
//			System.out.print(linkedList.get(i) + "\t");
//		}
//		
		
//		System.out.println(linkedList);
//		linkedList.remove();
//		System.out.println(linkedList);
		
//		Thread writeThread = new Thread(GeneratorThread);
//		writeThread.start();
		
//		Runnable ReaderThread = () ->
//		{
//			
//		};
//		Thread readerThread = new Thread(ReaderThread);
//		readerThread.start();

	}

}
